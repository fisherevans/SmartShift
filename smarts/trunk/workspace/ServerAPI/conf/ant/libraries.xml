<project name="ServerAPI-Libraries" default="import" basedir="../.." xmlns:artifact="antlib:org.apache.maven.artifact.ant">
	<property file="conf/ant/build.properties"/>

	<path id="classpath">
		<fileset dir="${lib.dir}/jar">
			<include name="*.jar" />
		</fileset>
	</path>

	<target name="clean">
		<delete dir="${lib.dir}"/>
		<delete dir="${user.home}/.m2/repository"/>
	</target>

	<target name="init">
		<mkdir dir="${user.home}/.m2" />
		<get src="http://mirrors.ibiblio.org/apache/maven/ant-tasks/2.1.3/binaries/maven-ant-tasks-2.1.3.jar" 
    	    dest="${user.home}/.m2/maven-ant-tasks-2.1.3.jar" 
    	    verbose="true"
    	    usetimestamp="true"/>
		<path id="maven-ant-tasks.classpath" path="${user.home}/.m2/maven-ant-tasks-2.1.3.jar" />
		<typedef resource="org/apache/maven/artifact/ant/antlib.xml"
  	           uri="antlib:org.apache.maven.artifact.ant"
  	           classpathref="maven-ant-tasks.classpath" />
	</target>

	<target name="pull" depends="init">
		<artifact:dependencies filesetId="dependency.fileset"
		        sourcesFilesetId="sources.dependency.fileset"
		        javadocFilesetId="javadoc.dependency.fileset"
		        versionsId="dependency.versions">
			<!-- PUT DEPENDENCIES HERE!!! -->
			<!-- http://search.maven.org/ -->

			<dependency groupId="org.glassfish.jersey.bundles" artifactId="jaxrs-ri" version="2.12"/>
			<dependency groupId="org.hibernate" artifactId="hibernate-core" version="4.3.6.Final"/>
			<dependency groupId="mysql" artifactId="mysql-connector-java" version="5.1.32"/>
			<dependency groupId="org.glassfish" artifactId="javax.servlet" version="10.0-b28"/>
			<dependency groupId="org.apache.tomcat" artifactId="catalina-ant" version="6.0.41"/>
			<!-- <dependency groupId="org.apache.geronimo.configs" artifactId="tomcat7-deployer" version="3.0-M1"/> -->

			<!-- END DEPENDENCY LIST -->
		</artifact:dependencies>
	</target>

	<target name="import" depends="pull">
		<copy todir="${lib.dir}/jar">
			<fileset refid="dependency.fileset" />
			<mapper classpathref="maven-ant-tasks.classpath"
		          classname="org.apache.maven.artifact.ant.VersionMapper"
		          from="${dependency.versions}" to="flatten" />
		</copy>
		<copy todir="${lib.dir}/src">
			<fileset refid="sources.dependency.fileset" />
			<mapper classpathref="maven-ant-tasks.classpath"
		          classname="org.apache.maven.artifact.ant.VersionMapper"
		          from="${dependency.versions}" to="flatten" />
		</copy>
		<copy todir="${lib.dir}/javadoc">
			<fileset refid="javadoc.dependency.fileset" />
			<mapper classpathref="maven-ant-tasks.classpath"
		          classname="org.apache.maven.artifact.ant.VersionMapper"
		          from="${dependency.versions}" to="flatten" />
		</copy>
	</target>

</project>